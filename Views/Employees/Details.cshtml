@using PPE.Data.Enums
@model PPE.Models.Employee

@{
    ViewData["Title"] = "Employee: " + Model.FullName;
}

<div class="d-flex justify-content-between align-items-center">
    <h3 class="card-title">Employee details</h3>
    <div class="d-flex">
        <a asp-action="Edit" asp-route-id="@Model?.Id" class="btn btn-primary btn-sm">Edit</a> | 
        <a asp-action="Index" class="btn btn-dark btn-sm">Back to list</a>
    </div>
</div>

<div class="bg-white mb-2">
    <div class="card-body">
        <div class="row justify-content-between align-items-center">
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <h5>@Html.DisplayNameFor(model => model.FullName)</h5>
                <strong>@Html.DisplayFor(model => model.FullName)</strong> 
            </div>
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <h6>@Html.DisplayNameFor(model => model.Project)</h6> 
                <strong>@Html.DisplayFor(model => model.Project!.Title)</strong>
            </div>
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <h6>@Html.DisplayNameFor(model => model.Size) | @Html.DisplayNameFor(model => model.ShoeSize)</h6> 
                <strong>@Html.DisplayFor(model => model.Size) | @Html.DisplayFor(model => model.ShoeSize)</strong>
            </div>
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <h6>@Html.DisplayNameFor(model => model.Phone)</h6> 
                <strong>@Html.DisplayFor(model => model.Phone)</strong> 
            </div>
            @*<div class="col-12 col-md-6">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                    </li>
                    <li class="list-group-item">
                    </li>

                    <li class="list-group-item">
                        <strong>@Html.DisplayNameFor(model => model.NNI)</strong> : <span>@Html.DisplayFor(model => model.NNI)</span>
                    </li>
                    <li class="list-group-item">
                        <strong>@Html.DisplayNameFor(model => model.Phone)</strong> : <span>@Html.DisplayFor(model => model.Phone)</span>
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-6">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <strong>@Html.DisplayNameFor(model => model.Tel)</strong> : <span>@Html.DisplayFor(model => model.Tel)</span>
                    </li>
                    <li class="list-group-item">
                        <strong>@Html.DisplayNameFor(model => Model.Project)</strong> : <span>@Html.DisplayFor(model => Model.Project.Prefix)</span>
                    </li>
                    <li class="list-group-item">
                        <strong>@Html.DisplayNameFor(model => Model.Function)</strong> : <span>@Html.DisplayFor(model => Model.Function.Title)</span>
                    </li>
                    <li class="list-group-item">
                        <strong>@Html.DisplayNameFor(model => Model.Gender)</strong> : <span>@Html.DisplayFor(model => Model.Gender)</span>
                    </li>
                </ul>
            </div>*@
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12 col-md-6">
        <div class="d-flex justify-content-between align-items-center">
            <h3 class="card-title">Current PPEs</h3>
            <a asp-action="Create" class="btn btn-primary btn-sm">Add new PPE</a>
        </div>
        <div class="bg-white">
            <table class="table">
                <thead>
                <tr class="bg-primary text-white">
                    <th>Date</th>
                    <th>PPE</th>
                    <th>Variant</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                @foreach (var item in ViewBag.EmployeeStocks)
                {
                    <tr>
                        <td>@item.Date.ToString("g")</td>
                        <td>@item.VariantValue.Variant.Ppe.Title</td>
                        <td>@item.VariantValue.Value</td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-primary btn-sm">Return</a>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-12 col-md-6">
        <div class="d-flex justify-content-between align-items-center">
                            <h3 class="card-title">History PPEs</h3>
                            @* <a asp-action="Create" class="btn btn-primary btn-sm">Add PPE</a> *@
                        </div>
        <div class="bg-white">
            <table class="table">
                <thead>
                <tr class="bg-dark text-white">
                    <th>Date</th>
                    <th>PPE</th>
                    <th>Variant</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                @foreach (var item in ViewBag.EmployeeStocksHistory)
                {
                    <tr>
                        <td>@item.Date.ToString("g")</td>
                        <td>@item.VariantValue.Variant.Ppe.Title</td>
                        <td>@item.VariantValue.Value</td>
                        <td class="@(item.Status == StockEmployeeStatus.Lost ? "text-danger": item.Status == StockEmployeeStatus.Returned ? "text-success" : "text-warning")">@item.Status</td>
                    </tr>
                }
                </tbody>
            </table>
        </div>
    </div>
</div>

